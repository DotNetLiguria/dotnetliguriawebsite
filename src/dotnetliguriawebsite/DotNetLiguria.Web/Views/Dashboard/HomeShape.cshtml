@model DotNetLiguria.Models.HtmlSnippet

@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<script src="//cdn.ckeditor.com/4.4.7/full/ckeditor.js"></script>


    <div class="row">

        <div class="col-md-3 md-margin-bottom-40">
            <img class="img-responsive profile-img margin-bottom-20" src="http://moomar.co.uk/wp-content/uploads/2012/03/Home-Logo-TUT-Grab-13.jpg" alt="">
            <ul class="list-group sidebar-nav-v1 margin-bottom-40" id="sidebar-nav-1">
                @foreach (var item in ViewBag.Snipperts)
                {
                    if (Model.HtmlSnippetId.Equals(item.HtmlSnippetId))
                    {
                        <li class="list-group-item active">
                            <a href="@Url.Action("HomeShape", "Dashboard", new { item.HtmlSnippetId })"><i class="@item.Icon"></i> @item.Description</a>
                        </li>
                    }
                    else
                    {
                        <li class="list-group-item">
                            <a href="@Url.Action("HomeShape", "Dashboard", new { item.HtmlSnippetId })"><i class="@item.Icon"></i> @item.Description</a>
                        </li>
                    }
                }
            </ul>
        </div>

        <div class="col-md-9">
            <form method="post" action="/Dashboard/UpdateSnippet">

                @Html.HiddenFor(x => x.HtmlSnippetId)

                <div class="form-group">
                    @Html.TextAreaFor(x => x.Value, new { @name = "editor", @class = "ckeditor", @id = "editor1" })
                </div>

                <div class="form-group">
                    <input type="submit" value="Update" class="btn btn-success" />
                </div>


                <script type="text/javascript">
                    CKEDITOR.replace('editor1', {
                        filebrowserImageBrowseUrl: '/Dashboard/uploadPartial',
                        filebrowserImageUploadUrl: '/Dashboard/uploadnow'
                    });

                    function updateValue(id, value) {
                        // this gets called from the popup window and updates the field with a new value
                        var jqueryObjectByClass = $(".cke_dialog_ui_input_text")[1];
                        jqueryObjectByClass.value = value;
                    }
                </script>


            </form>
        </div>

    </div>